<html>
<head>
<title>secure website</title>
<script>

var tabHistory = "";

window.addEventListener("message", function(event) {
	if (event.source != window)
	   return;

	if (event.data.type && event.data.type === "get-app-data-response") {
		tabHistory = "" + tabHistory + JSON.stringify(event.data.stats);
		document.getElementById("website_message").innerHTML = tabHistory;
	}
});

</script>
</head>
<body bgcolor="green">

<h1> Secure website </h1>
<hr>
<h3 id="website_message"> no malicious activity going on :) </h3>


<button type="button" onClick="postMe()">Click Me!</button>

<script>

setInterval(ping, 5000);

function ping() {
	var data = { type: "get-app-data" };
	window.postMessage(data, "*");
}

// function postMe() {
// 	document.body.style.backgroundColor = "red";
// 	document.getElementById("website_message").innerHTML = "just kidding";

// 	var data = { type: "FROM_PAGE", text: "Hello from the webpage!" };
// 	window.postMessage(data, "*");
// }

</script>

</body>
</html>
